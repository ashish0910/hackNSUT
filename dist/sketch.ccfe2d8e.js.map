{"version":3,"sources":["js/sketch.js"],"names":["video","poseNet","poses","l1","l2","l3","cycle","prev","saved","setup","createCanvas","createCapture","VIDEO","size","width","height","ml5","modelReady","on","results","hide","select","html","draw","image","drawKeypoints","drawSkeleton","i","length","pose","j","keypoints","keypoint","score","fill","noStroke","ellipse","position","x","y","abs","leftShoulder","leftWrist","rightShoulder","rightWrist","leftEye","rightEye","console","log","$","fadeOut","fadeIn","xAxis","lx","ly","skeleton","partA","partB","stroke","line"],"mappings":"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","file":"sketch.ccfe2d8e.js","sourceRoot":"..\\public","sourcesContent":["let video;\r\nlet poseNet;\r\nlet poses = [];\r\nlet l1=false;\r\nlet l2=false;\r\nlet l3=false;\r\nlet cycle=0;\r\nvar prev=0;\r\nvar saved = false;\r\n\r\nfunction setup() {\r\n  createCanvas(640, 480);\r\n  video = createCapture(VIDEO);\r\n  video.size(width, height);\r\n\r\n  // Create a new poseNet method with a single detection\r\n  poseNet = ml5.poseNet(video, modelReady);\r\n  // This sets up an event that fills the global variable \"poses\"\r\n  // with an array every time new poses are detected\r\n  poseNet.on('pose', function(results) {\r\n    poses = results;\r\n  });\r\n  // Hide the video element, and just show the canvas\r\n  video.hide();\r\n}\r\n\r\nfunction modelReady() {\r\n  select('#status').html('Model Loaded');\r\n}\r\n\r\nfunction draw() {\r\n  image(video, 0, 0, width, height);\r\n\r\n  // We can call both functions to draw all keypoints and the skeletons\r\n  drawKeypoints();\r\n  drawSkeleton();\r\n}\r\n\r\n// A function to draw ellipses over the detected keypoints\r\nfunction drawKeypoints()Â  {\r\n  // Loop through all the poses detected\r\n  for (let i = 0; i < poses.length; i++) {\r\n    // For each pose detected, loop through all the keypoints\r\n    let pose = poses[i].pose;\r\n    for (let j = 0; j < pose.keypoints.length; j++) {\r\n      // A keypoint is an object describing a body part (like rightArm or leftShoulder)\r\n      let keypoint = pose.keypoints[j];\r\n      // Only draw an ellipse is the pose probability is bigger than 0.2\r\n      if (keypoint.score > 0.2) {\r\n        fill(255, 0, 0);\r\n        noStroke();\r\n        ellipse(keypoint.position.x, keypoint.position.y, 10, 10);\r\n      }\r\n    }\r\n  }\r\n\r\n  if(poses.length!=0){\r\n    l1=true;\r\n    if(abs(poses[0].pose.leftShoulder.y-poses[0].pose.leftWrist.y)<30&&abs(poses[0].pose.rightShoulder.y-poses[0].pose.rightWrist.y)<30&&l1==true){\r\n      l2=true;\r\n      l3=false;\r\n      l1=false;\r\n      \r\n    }\r\n\r\n    if(poses[0].pose.leftWrist.y<poses[0].pose.leftEye.y && poses[0].pose.rightWrist.y<poses[0].pose.rightEye.y && l2==true){\r\n      l3=true;\r\n      l2=false;\r\n      l1=false;\r\n    \r\n     \r\n    }\r\n    if(poses[0].pose.leftWrist.y < (poses[0].pose.leftShoulder.y-30) && poses[0].pose.rightWrist.y < (poses[0].pose.rightShoulder.y-30) && l3==true){\r\n      l1=true;\r\n      l2=false;\r\n      l3=false;\r\n      \r\n      cycle++;\r\n      \r\n      \r\n    }\r\n\r\n    if(cycle!=prev){\r\n      console.log(cycle);\r\n      // document.getElementById(\"sarthak\").innerHTML=cycle;\r\n      $(\"#sarthak\").fadeOut(\"slow\",()=>{\r\n        $(\"#sarthak\").html(cycle);\r\n        $(\"#sarthak\").fadeIn();\r\n      });\r\n    }\r\n    if(cycle==10 && saved==false){\r\n      console.log(\"e over\");\r\n    //   $.ajax({\r\n    //     type:\"GET\",\r\n    //     url :\"/save/sarthak\",\r\n    //     success : function(msg){\r\n    //        console.log(msg);\r\n    //        saved=true;\r\n       \r\n    //     }\r\n    // });\r\n    }\r\n    prev=cycle;\r\n    \r\n  }\r\n \r\n}\r\n\r\nfunction xAxis(lx,ly){\r\n\r\n  \r\n\r\n}\r\n\r\n// A function to draw the skeletons\r\nfunction drawSkeleton() {\r\n  // Loop through all the skeletons detected\r\n  for (let i = 0; i < poses.length; i++) {\r\n    let skeleton = poses[i].skeleton;\r\n    // For every skeleton, loop through all body connections\r\n    for (let j = 0; j < skeleton.length; j++) {\r\n      let partA = skeleton[j][0];\r\n      let partB = skeleton[j][1];\r\n      stroke(255, 0, 0);\r\n      line(partA.position.x, partA.position.y, partB.position.x, partB.position.y);\r\n    }\r\n  }\r\n}\r\n"]}